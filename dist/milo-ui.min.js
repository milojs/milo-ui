!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){this.el.disabled=a}function e(){return!!this.el.disabled}var f=milo.Component,g=milo.registry.components,h=f.createComponentClass("MLButton",{events:void 0,dom:{cls:"ml-ui-button"}});g.add(h),b.exports=h,_.extendProto(h,{disable:d,isDisabled:e})},{}],2:[function(a,b,c){"use strict";function d(){l.prototype.init.apply(this,arguments),this.on("childrenbound",e)}function e(){_.defineProperties(this,{_comboInput:this.container.scope.input,_comboList:this.container.scope.datalist}),this._comboList.template.set(o),this._comboInput.data.on("input",{subscriber:j,context:this})}function f(){return this._comboInput?this._comboInput.data.get():void 0}function g(a){return i.call(this,"set",a)}function h(){return i.call(this,"del",value)}function i(a,b){if(this._comboInput){var c=this._comboInput.data[a](b);return j.call(this),c}}function j(){this.data.dispatchSourceMessage(n)}function k(a,b){this._comboList.template.render({comboOptions:this.model.get()})}var l=milo.Component,m=milo.registry.components,n="mlcombochange",o='{{~ it.comboOptions :option }}                             <option value="{{= option.label }}"></option>                          {{~}}',p=l.createComponentClass("MLCombo",{events:void 0,data:{get:f,set:g,del:h,splice:void 0,event:n},model:{messages:{"***":{subscriber:k,context:"owner"}}},dom:{cls:"ml-ui-datalist"},container:void 0});m.add(p),b.exports=p,_.extendProto(p,{init:d})},{}],3:[function(a,b,c){"use strict";function d(){t.prototype.init.apply(this,arguments),this.model.set([]),this.once("childrenbound",k)}function e(a){v(a,w.Optional(Function)),this._dataValidation=a}function f(a){this._combo.setOptions(a)}function g(){this._combo.clearComboInput()}function h(a){this._combo.toggleAddButton(a)}function i(a){this._combo.setAddItemPrompt(a)}function j(){t.prototype.destroy.apply(this,arguments),this._connector&&milo.minder.destroyConnector(this._connector),this._connector=null}function k(){this.template.render().binder(),l.call(this)}function l(){_.defineProperties(this,{_combo:this.container.scope.combo,_list:this.container.scope.list}),this._connector=milo.minder(this._list.model,"<<<->>>",this.model),this._combo.data.on("",{subscriber:m,context:this}),this._combo.on("additem",{subscriber:s,context:this})}function m(a,b){b.newValue&&n.call(this,a,b)&&this._list.model.push(b.newValue),this._combo.data.del(),this._combo.data._value=""}function n(a,b){return this._dataValidation?this._dataValidation(a,b,this._list.model.get()):!0}function o(a,b){this.data.dispatchSourceMessage(x)}function p(){var a=this.model.get();return"object"==typeof a?_.clone(a):a}function q(a){this.model.set(a)}function r(){return this.model.set([])}function s(a,b){this.postMessage("additem",b),this.events.postMessage("milo_combolistadditem",b)}var t=milo.Component,u=milo.registry.components,v=milo.util.check,w=v.Match,x="mlcombolistchange",y=t.createComponentClass("MLComboList",{dom:{cls:"ml-ui-combo-list"},data:{get:p,set:q,del:r,event:x},events:void 0,container:void 0,model:{messages:{"***":{subscriber:o,context:"owner"}}},template:{template:'<div ml-bind="MLSuperCombo:combo"></div>                   <div ml-bind="MLList:list">                       <div ml-bind="MLListItem:item" class="list-item">                           <span ml-bind="[data]:label"></span>                           <span ml-bind="[events]:deleteBtn" class="glyphicon glyphicon-remove"></span>                       </div>                   </div>'}});u.add(y),b.exports=y,_.extendProto(y,{init:d,setOptions:f,setDataValidation:e,toggleAddButton:h,destroy:j,setAddItemPrompt:i,clearComboInput:g})},{}],4:[function(a,b,c){"use strict";function d(){return _.date(this.el.min)}function e(a){var b=_.toDate(a);this.el.min=b?l(b):""}function f(){return _.date(this.el.max)}function g(a){var b=_.toDate(a);this.el.max=b?l(b):""}function h(){return _.toDate(this.el.value)}function i(a){var b=_.toDate(a);this.el.value=b?l(b):"",k.call(this)}function j(){this.el.value="",k.call(this)}function k(){this.data.dispatchSourceMessage("input")}function l(a){function b(a){return 10>a?"0"+a:a}var c=[a.getFullYear(),b(a.getMonth()+1),b(a.getDate())],d=c.join("-");return d}var m=milo.Component,n=milo.registry.components,o=m.createComponentClass("MLDate",{events:void 0,data:{get:h,set:i,del:j},dom:{cls:"ml-ui-date"}});_.extendProto(o,{getMin:d,setMin:e,getMax:f,setMax:g}),n.add(o),b.exports=o},{}],5:[function(a,b,c){"use strict";var d=milo.Component,e=milo.registry.components,f=d.createComponentClass("MLDropTarget",["drop"]);e.add(f),b.exports=f},{}],6:[function(a,b,c){"use strict";function d(a,b){b?a.classList.add("ml-ui-foldtree--unfold",b):a.classList.toggle("ml-ui-foldtree--unfold")}function e(a,b){var c=b.getAttribute("data-item-id"),d=this._itemsMap[c];this.postMessage("mlfoldtree_"+a,{item:d,el:b})}function f(a,b){var c=b.target;if(c.classList.contains("ml-ui-foldtree-button"))d(c.parentNode.parentNode);else{if(!c.classList.contains("ml-ui-foldtree-label"))return;e.call(this,a,c.parentNode)}b.stopPropagation()}function g(a){this._itemTemplate=k.compile(a)}function h(a){function b(a){if(a.items)var d=_.map(a.items,function(a){var b=a.id||n();if(c._itemsMap[b])throw new Error("MLFoldTree: item has duplicate ID:"+b);return c._itemsMap[b]=a,b});return q({itemIDs:d,data:a,itemTemplate:c._itemTemplate||p,treeTemplate:b})}var c=this;this._data=a,c._itemsMap={},this.el.innerHTML=b(a)}function i(a,b){b=b||"ml-ui-foldtree-active";var c=this.el.querySelectorAll("div.ml-ui-foldtree-item");if(_.forEach(c,function(a){a.classList.remove(b)}),a){var d=this.el.querySelector('div.ml-ui-foldtree-item[data-item-id="'+a+'"]');d.classList.add(b)}}function j(a,b){var c=this.el.querySelector('div.ml-ui-foldtree-item[data-item-id="'+a+'"]');d(c.parentNode,b)}var k=milo.util.doT,l=milo.registry.components,m=milo.Component,n=milo.util.uniqueId,o='<ul class="ml-ui-foldtree-list">                        {{~ it.data.items :item:index }}                            {{ var hasSubTree = item.items && item.items.length; }}                            <li {{? hasSubTree }}class="ml-ui-foldtree--has-multiple"{{?}}>                                <div class="ml-ui-foldtree-item" data-item-id="{{= it.itemIDs[index] }}">                                    {{? hasSubTree }}                                        <div class="ml-ui-foldtree-button"></div>                                    {{?}}                                    {{= it.itemTemplate({ item: item }) }}                                </div>                                {{? hasSubTree }}                                    {{= it.treeTemplate(item) }}                                {{?}}                            </li>                        {{~}}                    </ul>',p=k.compile('            <span class="ml-ui-foldtree-label">                {{= it.item.label }}            </span>'),q=k.compile(o),r=m.createComponentClass("MLFoldTree",{container:void 0,events:{messages:{"click dblclick":{subscriber:f,context:"owner"}}},dom:{cls:"ml-ui-foldtree-main"}});l.add(r),b.exports=r,_.extendProto(r,{setItemTemplate:g,renderTree:h,setActiveItem:i,toggleItem:j})},{}],7:[function(a,b,c){"use strict";var d=milo.Component,e=milo.registry.components,f=d.createComponentClass("MLGroup",{container:void 0,data:void 0,events:void 0,dom:{cls:"ml-ui-group"}});e.add(f),b.exports=f},{}],8:[function(a,b,c){"use strict";var d=milo.Component,e=milo.registry.components,f=d.createComponentClass("MLHyperlink",{events:void 0,data:void 0,dom:{cls:"ml-ui-hyperlink"}});e.add(f),b.exports=f},{}],9:[function(a,b,c){"use strict";function d(){j.prototype.init.apply(this,arguments)}function e(a){return this.model.set(a),a}function f(){var a=this.model.get();return a&&"object"==typeof a?_.clone(a):a}function g(){this.model.del()}function h(){this.data.dispatchSourceMessage(l)}function i(a,b){this.el.src=b.newValue,h.call(this)}var j=milo.Component,k=milo.registry.components,l="mlimagechange",m=j.createComponentClass("MLImage",{data:{set:e,get:f,del:g,splice:void 0,event:l},model:{messages:{".src":{subscriber:i,context:"owner"}}},events:void 0,container:void 0,dom:{tagName:"img",cls:"ml-ui-image"}});k.add(m),b.exports=m,_.extendProto(m,{init:d})},{}],10:[function(a,b,c){"use strict";function d(a){this.el.disabled=a}function e(){return!!this.el.disabled}function f(a){this.el.setAttribute("maxlength",a)}var g=milo.Component,h=milo.registry.components,i=g.createComponentClass("MLInput",{data:void 0,events:void 0,dom:{cls:"ml-ui-input"}});h.add(i),b.exports=i,_.extendProto(i,{disable:d,isDisabled:e,setMaxLength:f})},{}],11:[function(a,b,c){"use strict";function d(){q.prototype.init.apply(this,arguments),this.once("childrenbound",e),this.model.set([])}function e(){i.call(this)}function f(a){this._input.el.setAttribute("placeHolder",a)}function g(a){t=a||t}function h(){q.prototype.destroy.apply(this,arguments),this._connector&&milo.minder.destroyConnector(this._connector),this._connector=null}function i(){this.template.render().binder(),j.call(this)}function j(){_.defineProperties(this,{_input:this.container.scope.input,_button:this.container.scope.button,_list:this.container.scope.list}),this._connector=milo.minder(this._list.model,"<<<->>>",this.model),this._button.events.on("click",{subscriber:k,context:this})}function k(a){var b=this._input.data.get(0);this._input.data&&t(b,function(a,b){this._list.model.push({label:a,value:b})}.bind(this)),this._input.data.del()}function l(a,b){this.data.dispatchSourceMessage(s)}function m(){var a=this.model.get();return a?_.clone(a):void 0}function n(a){this.model.set(a)}function o(){return this.model.set([])}function p(){this.model.splice.apply(this.model,arguments)}var q=milo.Component,r=milo.registry.components,s="mlinputlistchange",t=function(a,b){b(a)},u=q.createComponentClass("MLInputList",{dom:{cls:"ml-ui-input-list"},data:{get:m,set:n,del:o,splice:p,event:s},events:void 0,container:void 0,model:{messages:{"***":{subscriber:l,context:"owner"}}},template:{template:'            <div ml-bind="MLList:list">                <div ml-bind="MLListItem:item" class="list-item">                    <span ml-bind="[data]:label"></span>                    <span ml-bind="[events]:deleteBtn" class="glyphicon glyphicon-remove"></span>                </div>            </div>            <input type="text" ml-bind="MLInput:input" class="form-control">            <button ml-bind="MLButton:button" class="btn btn-default">                Add            </button>'}});r.add(u),b.exports=u,_.extendProto(u,{init:d,setAsync:g,setPlaceHolder:f,destroy:h})},{}],12:[function(a,b,c){"use strict";function d(){i.prototype.init.apply(this,arguments),this.on("childrenbound",h)}function e(){this._connector&&milo.minder.destroyConnector(this._connector),this._connector=null,i.prototype.destroy.apply(this,arguments)}function f(a){this.model.splice(a,1)}function g(a,b){var c=this.model.splice(a,1);return this.model.splice(b,0,c[0])}function h(){this.model.set([]),this._connector=milo.minder(this.model,"<<<-",this.data).deferChangeMode("<<<->>>")}var i=milo.Component,j=milo.registry.components,k=i.createComponentClass("MLList",{dom:{cls:"ml-ui-list"},data:void 0,events:void 0,model:void 0,list:void 0});j.add(k),b.exports=k,_.extendProto(k,{init:d,destroy:e,removeItem:f,moveItem:g})},{}],13:[function(a,b,c){"use strict";function d(){u.prototype.init.apply(this,arguments),this.on("childrenbound",e)}function e(){var a=this.container.scope.deleteBtn;a&&a.events.on("click",{subscriber:this.removeItem,context:this})}function f(){try{var a=this.item.list.owner}catch(b){}a&&a.removeItem(this.item.index)}function g(a){var b=this.item.list.owner;b&&b.moveItem(this.item.index,a)}function h(a){var b=w.get(a.compClass);return a.params&&a.params.index&&(b==y||b.prototype instanceof y)&&i.call(this)}function i(a){a=a||v.service.getCurrentDragSource();try{var b=a.item.list}catch(c){}return b==this.item.list}function j(){return this.isDropAllowed.apply(this,arguments)}function k(a,b){n.call(this);var c,d=new v(b),e=d.getComponentMeta(),f=d.getComponentState(),g=this.item.list.owner,h=e.params&&e.params.index,j=v.getDropPositionY(b,this.el),k="below"==j,l="above"==j;if(i.call(this)){if(f.compName==this.name)return;var m,o=f.facetsStates.item.state.index,p=o<this.item.index;if(p){if(m=l&&o+1==this.item.index)return;c=this.item.index-l}else{if(m=k&&o-1==this.item.index)return;c=this.item.index+k}g.moveItem(+h,c,f)}else{c=this.item.index+k;try{var q=f.facetsStates.data.state}catch(r){}g.data.splice(c,0,q)}}function l(){v.service.once("dragdropcompleted",{subscriber:o,context:this})}function m(){this.dom.addCssClasses("ml-drag-over")}function n(){this.dom.removeCssClasses("ml-drag-over")}function o(a,b){var c=b.component,d="drop"==b.eventType&&!i.call(this,c);d&&this.item.removeItem()}function p(){return{index:this.item.index}}function q(){var a=this.model.get();return null!==a&&"object"==typeof a?_.clone(a):a}function r(a){return"object"==typeof a&&this.data._set(a),this.model.set(a),t.call(this),a}function s(){this.data._del(),this.model.del(),t.call(this)}function t(){this.data.dispatchSourceMessage(x)}var u=milo.Component,v=milo.util.dragDrop,w=milo.registry.components,x="mllistitemchange",y=u.createComponentClass("MLListItem",{container:void 0,dom:void 0,drag:{messages:{dragstart:{subscriber:l,context:"owner"}},meta:{params:"getMetaData"}},drop:{messages:{dragenter:{subscriber:m,context:"owner"},dragover:{subscriber:m,context:"owner"},dragleave:{subscriber:n,context:"owner"},drop:{subscriber:k,context:"owner"}},allow:{components:j}},data:{get:q,set:r,del:s,event:x},model:void 0,item:void 0});w.add(y);var y=b.exports=y;_.extendProto(y,{init:d,moveItem:g,removeItem:f,getMetaData:p,isDropAllowed:h})},{}],14:[function(a,b,c){"use strict";function d(){_.defineProperty(this,"_radioList",[],_.CONF),_.defineProperty(this,q,r+o()),this._renderOptions={},m.prototype.init.apply(this,arguments)}function e(a){this._renderOptions=a}function f(a){var b,c=this._radioList;return c.length?(c.forEach(function(c){c.checked=c.value==a,c.checked&&(b=a)}),j.call(this),b):void 0}function g(){var a=_.find(this._radioList,function(a){return a.checked});return a&&a.value||void 0}function h(){var a=this._radioList;return a.length&&a.forEach(function(a){a.checked=!1}),void j.call(this)}function i(a,b){"radio"==b.target.type&&j.call(this)}function j(){this.data.dispatchSourceMessage(p)}function k(a,b){this.template.render({radioOptions:this.model.get(),elementName:this[q],_renderOptions:this._renderOptions});var c=this.el.querySelectorAll('input[type="radio"]'),d=_.toArray(c);this._radioList.length=0,this._radioList.splice.apply(this._radioList,[0,0].concat(d))}function l(){delete this._radioList,m.prototype.destroy.apply(this,arguments)}var m=milo.Component,n=milo.registry.components,o=milo.util.uniqueId,p="mlradiogroupchange",q="_mlRadioGroupElementID",r="ml-radio-group-",s=m.createComponentClass("MLRadioGroup",{data:{set:f,get:g,del:h,splice:void 0,event:p},model:{messages:{"***":{subscriber:k,context:"owner"}}},events:{messages:{click:{subscriber:i,context:"owner"}}},container:void 0,dom:{cls:"ml-ui-radio-group"},template:{template:'{{~ it.radioOptions :option }}                         {{##def.elID:{{= it.elementName }}-{{= option.value }}#}}                         <span class="{{= it._renderOptions.optionCssClass || "'+r+'option" }}">                             <input id="{{# def.elID }}" type="radio" value="{{= option.value }}" name="{{= it.elementName }}">                             <label for="{{# def.elID }}">{{= option.label }}</label>                         </span>                    {{~}}'}});n.add(s),b.exports=s,_.extendProto(s,{init:d,destroy:l,setRenderOptions:e})},{}],15:[function(a,b,c){"use strict";function d(a){var b={context:this,subscriber:f};this.model.off("**",b),this.model.set(a),this.model.on("**",b),f.call(this)}function e(a){this.el.disabled=a}function f(a,b){this.template.render({selectOptions:this.model.get()})}var g=milo.Component,h=milo.registry.components,i=g.createComponentClass("MLSelect",{dom:{cls:"ml-ui-select"},data:void 0,events:void 0,model:{messages:{"**":{subscriber:f,context:"owner"}}},template:{template:'{{~ it.selectOptions :option }}                         <option value="{{= option.value }}" {{? option.selected }}selected{{?}}>{{= option.label }}</option>                    {{~}}'}});h.add(i),b.exports=i,_.extendProto(i,{setOptions:d,disable:e})},{}],16:[function(a,b,c){"use strict";function d(){M.prototype.init.apply(this,arguments),this.once("childrenbound",e),_.defineProperties(this,{_optionsData:[],_filteredOptionsData:[]},_.WRIT)}function e(){this.template.render().binder(),f.call(this)}function f(){var a=this.container.scope;_.defineProperties(this,{_comboInput:a.input,_comboList:a.list,_comboOptions:a.options,_comboBefore:a.before,_comboAfter:a.after,_comboAddItemDiv:a.addItemDiv,_comboAddPrompt:a.addPrompt,_comboAddBtn:a.addBtn,_optionTemplate:O.compile(S)}),_.defineProperties(this,{_startIndex:0,_endIndex:T,_hidden:!1,_elementHeight:V,_total:0,_optionsHeight:200,_lastScrollPos:0,_currentValue:null,_selected:null,_isAddButtonShown:!1},_.WRIT),this.dom.setStyles({position:"relative"}),r(this._comboList,this._comboOptions,this),s(this._comboInput,this),t(this._comboAddBtn,this),this.events.on("keydown",{subscriber:A,context:this})}function g(a){this._hidden=!a,this._comboList.dom.toggle(a)}function h(){var a=this.el.getBoundingClientRect(),b=Math.max(this.el.ownerDocument.documentElement.clientHeight,window.innerHeight||0),c="",d=a.bottom+this._optionsHeight-b;if(d>0){var e=this._optionsHeight-a.top;d>e&&(c=-this._optionsHeight+"px")}this._comboList.dom.setStyles({top:c}),this._hidden=!1,this.el.classList.add(Q),this._comboList.dom.toggle(!0)}function i(){this._hidden=!0,this.el.classList.remove(Q),this._comboList.dom.toggle(!1)}function j(a,b){this._comboAddItemDiv.dom.toggle(a),b&&b.preserveState&&(this.__showAddOnClick=this._isAddButtonShown),this._isAddButtonShown=a}function k(a){this._addItemPrompt=a,this._comboAddPrompt.el.innerHTML=a,this.toggleAddButton(!1)}function l(a){this._comboInput.el.placeholder=a}function m(a){this._optionsData=a,this.setFilteredOptions(a)}function n(a){this._optionsURL=a.url,this._formatOptionsURL=a.formatOptions||function(a){return a}}function o(a){var b=this._optionsURL,c=this._comboInput.data.get();a=a||_.noop,milo.util.request.post(b,{name:c},function(b,d){if(b)return P.error('Can not search for "'+c+'"'),a(new Error("Request error"));var e=_.jsonParse(d);e?a(null,e):a(new Error("Data error"))})}function p(a){return a?(this._filteredOptionsData=a,this._total=a.length,void this.update()):P.error("setFilteredOptions: parameter is undefined")}function q(){var a=this._hidden,b=this._filteredOptionsData.slice(this._startIndex,this._endIndex);this._comboOptions.template.render({comboOptions:b}),this._elementHeight=this._elementHeight||V,a&&this.hideOptions();var c=this._startIndex*this._elementHeight,d=(this._total-this._endIndex)*this._elementHeight;this._comboBefore.el.style.height=c+"px",this._comboAfter.el.style.height=d>0?d+"px":"0px"}function r(a,b,c){c.toggleAddButton(!1),b.template.set(S),a.dom.setStyles({overflow:"scroll",height:c._optionsHeight+"px",width:"100%",position:"absolute",zIndex:10}),c.hideOptions(),a.events.onMessages({click:{subscriber:I,context:c},scroll:{subscriber:J,context:c}})}function s(a,b){a.events.once("focus",function(){a.data.on("",{subscriber:x,context:b}),a.events.on("click",{subscriber:F,context:b}),a.events.on("keydown",{subscriber:G,context:b})})}function t(a,b){a.events.on("click",{subscriber:H,context:b})}function u(){return this._currentValue}function v(a){this._currentValue=a,this._comboInput.data.set(a&&a.label),_.deferMethod(this,"hideOptions")}function w(){this._currentValue=null,this._comboInput.data.set("")}function x(a,b){var c=b.newValue&&b.newValue.trim();if(this._optionsURL){var d=this;o.call(this,function(a,b){if(!a&&b)try{var e=b.data.map(d._formatOptionsURL);d.setOptions(e),z.call(d,c,d._optionsData)}catch(f){P.error("Data error",f)}})}else{var e=y.call(this,c);z.call(this,c,e)}}function y(a){return this._optionsData.filter(function(b){if(delete b.selected,b.label){var c=b.label.toLowerCase();return 0==c.trim().toLowerCase().indexOf(a.toLowerCase())}})}function z(a,b){function c(b){return b.label.toLowerCase()===a.toLowerCase()}a?(b.length&&_.find(b,c)?this.toggleAddButton(!1,{preserveState:!0}):this._addItemPrompt&&this.toggleAddButton(this._optionsData.length>1||this._optionsURL),b.length?(this.showOptions(),b[0].selected=!0,this._selected=b[0]):this.hideOptions()):this.toggleAddButton(!1,{preserveState:!0}),this.setFilteredOptions(b),this._comboList.el.scrollTop=0}function A(a,b){var c=X[b.keyCode];c&&B.call(this,c)}function B(a){var b=this.el.querySelectorAll(".selected")[0],c=this._comboList.el.scrollTop,d=b?b.offsetTop:0,e=d-c;if(b){var f=K.call(this,b),g=this._filteredOptionsData[f],h=this._filteredOptionsData[f+a];h&&(delete g.selected,h.selected=!0,this._selected=h,this.update())}else this._filteredOptionsData[0]&&(this._filteredOptionsData[0].selected=!0,this.update());e>this._optionsHeight-2*this._elementHeight&&1===a&&(this._comboList.el.scrollTop+=this._elementHeight*a*5),e<this._elementHeight&&-1===a&&(this._comboList.el.scrollTop+=this._elementHeight*a*5)}function C(a,b){this._mouseIsOver=!0}function D(a,b){var c=this;this._mouseIsOver=!1,this._mouseOutTimer&&clearInterval(this._mouseOutTimer),this._mouseOutTimer=setTimeout(function(){c._mouseIsOver||E.call(c)},750)}function E(){this.hideOptions(),this.toggleAddButton(!1,{preserveState:!0})}function F(a,b){this.showOptions(),this.__showAddOnClick&&this.toggleAddButton(!0)}function G(a,b){13==b.keyCode&&this._selected&&L.call(this)}function H(a,b){var c={label:this._comboInput.el.value};this.postMessage("additem",c),this.events.postMessage("milo_supercomboadditem",c),this.toggleAddButton(!1,{preserveState:!0})}function I(a,b){var c=K.call(this,b.target),d=this._filteredOptionsData[c];this._selected=d,L.call(this),this.update()}function J(a,b){var c=b.target.scrollTop,d=c>this._lastScrollPos?"down":"up",e=this._comboOptions.el.lastElementChild,f=this._comboOptions.el.firstElementChild,g=e?e.offsetTop:0,h=f?f.offsetTop:0,i=g-c-this._optionsHeight+this._elementHeight,j=c-h,k=Math.floor(j/this._elementHeight),l=Math.floor(i/this._elementHeight),m=Math.floor(c/this._elementHeight)-U;("down"==d&&U>l||"up"==d&&U>k)&&(this._startIndex=m>0?m:0,this._endIndex=m+T,this._elementHeight=e.style.height,this.update()),this._lastScrollPos=c}function K(a){return Number(a.getAttribute("data-value"))+this._startIndex}function L(){delete this._selected.selected,this.hideOptions(),this.toggleAddButton(!1),this._comboInput.data.off("",{subscriber:x,context:this}),this.data.set(this._selected),this.data.dispatchSourceMessage(R),this._comboInput.data.on("",{subscriber:x,context:this}),this._selected=null,this.setFilteredOptions(this._optionsData)}var M=milo.Component,N=milo.registry.components,O=milo.util.doT,P=milo.util.logger,Q="ml-ui-supercombo-open",R="mlsupercombochange",S='{{~ it.comboOptions :option:index }}                            <div {{? option.selected}}class="selected" {{?}}data-value="{{= index }}">{{= option.label }}</div>                        {{~}}',T=100,U=25,V=20,W=M.createComponentClass("MLSuperCombo",{events:{messages:{mouseleave:{subscriber:D,context:"owner"},mouseover:{subscriber:C,context:"owner"}}},data:{get:u,set:v,del:w,splice:void 0,event:R},dom:{cls:"ml-ui-supercombo"},template:{template:'<input ml-bind="[data, events]:input" class="form-control ml-ui-input">                   <div ml-bind="[dom]:addItemDiv" class="ml-ui-supercombo-add">                        <span ml-bind=":addPrompt"></span>                        <button ml-bind="[events, dom]:addBtn" class="btn btn-default ml-ui-button">Add</button>                   </div>                   <div ml-bind="[dom, events]:list" class="ml-ui-supercombo-dropdown">                       <div ml-bind="[dom]:before"></div>                       <div ml-bind="[template, dom, events]:options" class="ml-ui-supercombo-options"></div>                       <div ml-bind="[dom]:after"></div>                   </div>'},container:void 0});N.add(W),b.exports=W,_.extendProto(W,{init:d,showOptions:h,hideOptions:i,toggleOptions:g,setOptions:m,initOptionsURL:n,setFilteredOptions:p,update:q,toggleAddButton:j,setAddItemPrompt:k,setPlaceholder:l,clearComboInput:w});var X={40:1,38:-1}},{}],17:[function(a,b,c){"use strict";var d=milo.Component,e=milo.registry.components,f=d.createComponentClass("MLText",{data:void 0,events:void 0,dom:{cls:"ml-ui-text"}});e.add(f),b.exports=f},{}],18:[function(a,b,c){"use strict";function d(a){return this._autoresize?l.warn("MLTextarea startAutoresize: autoresize is already on"):(this._autoresize=!0,this._autoresizeOptions=a,f.call(this),void e.call(this,"on"))}function e(a){this.events[a]("click",{subscriber:f,context:this}),this.data[a]("",{subscriber:f,context:this})}function f(){this.el.style.height=0;var a=this.el.scrollHeight,b=this._autoresizeOptions.minHeight,c=this._autoresizeOptions.maxHeight;a=a>=c?c:b>=a?b:a,this.el.style.height=a+"px"}function g(){return this._autoresize?(this._autoresize=!1,void e.call(this,"off")):l.warn("MLTextarea stopAutoresize: autoresize is not on")}function h(){return this._autoresize}function i(a){this.el.disabled=a}var j=milo.Component,k=milo.registry.components,l=milo.util.logger,m=j.createComponentClass("MLTextarea",{data:void 0,events:void 0,dom:{cls:"ml-ui-textarea"}});k.add(m),b.exports=m;_.extendProto(m,{startAutoresize:d,stopAutoresize:g,isAutoresized:h,disable:i})},{}],19:[function(a,b,c){"use strict";function d(){var a=this.el.value,b=a.match(j);if(b){var c=b[1],d=b[2];if(!(c>23||d>59)){var e=new Date(1970,0,1,c,d);return _.toDate(e)}}}function e(a){function b(a){return 10>a?"0"+a:a}var c=_.toDate(a);if(!c)return void(this.el.value="");var d=k.replace("hh",b(c.getHours())).replace("mm",b(c.getMinutes()));return this.el.value=d,d}function f(){this.el.value=""}var g=milo.Component,h=milo.registry.components,i=g.createComponentClass("MLTime",{events:void 0,data:{get:d,set:e,del:f},dom:{cls:"ml-ui-time"}});h.add(i),b.exports=i;var j=/^([0-9]{1,2})(?:\:|\.)([0-9]{1,2})$/,k="hh:mm"},{}],20:[function(a,b,c){"use strict";var d=milo.Component,e=milo.registry.components,f=d.createComponentClass("MLWrapper",{container:void 0,data:void 0,events:void 0,dom:{cls:"ml-ui-wrapper"}});e.add(f),b.exports=f},{}],21:[function(a,b,c){"use strict";function d(a){m(a,{message:String,type:n.Optional(String),close:n.Optional(Boolean),timeout:n.Optional(Number)});var b=p.createOnElement();a=g(a);var c=o[a.type];b.dom.addCssClasses(c),b._alert={options:a,visible:!1},b.template.render(a).binder();var d=b.container.scope;if(a.close&&d.closeBtn.events.on("click",{subscriber:f,context:b}),a.timeout){setTimeout(function(){b._alert.visible&&b.closeAlert()},a.timeout)}return b}function e(a){var b=p.createAlert(a);return b.openAlert(),b}function f(a,b){this.closeAlert()}function g(a){return a=_.clone(a),a.close="undefined"==typeof a.close||a.close===!0,a.timeout=Math.floor(a.timeout),a.type=a.type||"info",a}function h(){j.call(this,!0)}function i(){j.call(this,!1),this.destroy()}function j(a){a="undefined"==typeof a?!this._alert.visible:!!a;var b=a?"add":"remove",c=a?"appendChild":"removeChild";this._alert.visible=a,document.body[c](this.el),this.dom.toggle(a),this.el.setAttribute("aria-hidden",!a),this.el.classList[b]("in"),this.el[a?"focus":"blur"]()}var k=milo.Component,l=milo.registry.components,m=(milo.util.componentName,milo.util.logger,milo.util.check),n=m.Match,o={success:"alert-success",warning:"alert-warning",info:"alert-info",danger:"alert-danger",fixed:"alert-fixed"},p=k.createComponentClass("MLAlert",{container:void 0,events:void 0,dom:{cls:["ml-bs-alert","alert","fade"],attributes:{role:"alert","aria-hidden":"true"}},template:{template:'            {{? it.close }}                <button ml-bind="[events]:closeBtn" type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>            {{?}}            {{= it.message}}'}});l.add(p),b.exports=p,_.extend(p,{createAlert:d,openAlert:e}),_.extendProto(p,{openAlert:h,closeAlert:i})},{}],22:[function(a,b,c){"use strict";function d(a,b){v(a,{title:w.Optional(String),html:w.Optional(String),text:w.Optional(String),close:w.Optional(w.OneOf(Boolean,{backdrop:w.Optional(Boolean),keyboard:w.Optional(Boolean),button:w.Optional(Boolean)})),buttons:w.Optional([{name:w.Optional(String),type:String,label:String,close:w.Optional(Boolean),result:w.Optional(String),data:w.Optional(w.Any),cls:w.Optional(String)}]),cssClass:w.Optional(String)});var c=z.createOnElement();a=j(a),c._dialog={options:a,visible:!1},c.template.render(a).binder();var d=c.container.scope;return a.close.backdrop&&c.events.on("click",{subscriber:g,context:c}),a.title&&a.close.button&&d.closeBtn.events.on("click",{subscriber:h,context:c}),a.buttons.forEach(function(a){var b={subscriber:_.partial(e,a),context:c};d[a.name].events.on("click",b)}),b&&b(c),c}function e(a){a.close!==!1&&l.call(this,!1);var b=_.result(a.data,this,a);f.call(this,a.result,b)}function f(a,b){var c=this._dialog.subscriber;"function"==typeof c?c.call(this,a,b):c.subscriber.call(c.context,a,b)}function g(a,b){b.target==this.el&&this.closeDialog("dismissed")}function h(){this.closeDialog("closed")}function i(a){C&&C._dialog.options.close.keyboard&&27==a.keyCode&&C.closeDialog("dismissed")}function j(a){return a=_.clone(a),a.buttons=_.clone(a.buttons||x),a.buttons.forEach(function(a){a.name=a.name||t()}),a.close="undefined"==typeof a.close||a.close===!0?_.object(y,!0):"object"==typeof a.close?_.mapToObject(y,function(b){return a.close[b]!==!1}):_.object(y,!1),a}function k(a,b,c){var d=z.createDialog(a,c);return d.openDialog(b),d}function l(a){a="undefined"==typeof a?!this._dialog.visible:!!a;var b=a?"add":"remove",c=a?"appendChild":"removeChild";this._dialog.visible=a,a&&!A&&m(),document.body[c](this.el),B&&document.body[c](B),this.dom.toggle(a),this.el.setAttribute("aria-hidden",!a),document.body.classList[b]("modal-open"),this.el.classList[b]("in"),C=a?this:void 0,this.el[a?"focus":"blur"]()}function m(){B=document.createElement("div"),B.className="modal-backdrop fade in",document.addEventListener("keydown",i),A=!0}function n(a){return v(a,w.OneOf(Function,{subscriber:Function,context:w.Any})),C?u.warn("MLDialog openDialog: can't open dialog, another dialog is already open"):(this._dialog.subscriber=a,void l.call(this,!0))}function o(a,b){return C?(a=a||"closed",l.call(this,!1),void f.call(this,a,b)):u.warn("MLDialog closeDialog: can't close dialog, no dialog open")}function p(){return C}function q(){document.removeEventListener("keydown",i),r.prototype.destroy.apply(this,arguments)}var r=milo.Component,s=milo.registry.components,t=milo.util.componentName,u=milo.util.logger,v=milo.util.check,w=v.Match,x=[{type:"default",label:"OK",result:"OK"}],y=["backdrop","keyboard","button"],z=r.createComponentClass("MLDialog",{container:void 0,events:void 0,dom:{cls:["ml-bs-dialog","modal","fade"],attributes:{role:"dialog","aria-hidden":"true"}},template:{template:'            <div class="modal-dialog {{= it.cssClass }}">                <div class="modal-content">                    {{? it.title }}                        <div class="modal-header">                            {{? it.close.button }}                                <button ml-bind="[events]:closeBtn" type="button" class="close">&times;</button>                            {{?}}                            <h4 class="modal-title">{{= it.title }}</h4>                        </div>                    {{?}}                    {{? it.html || it.text }}                        <div class="modal-body" ml-bind="[container]:dialogBody">                            {{? it.html }}                                {{= it.html }}                            {{??}}                                <p>{{= it.text }}</p>                            {{?}}                        </div>                    {{?}}                    {{? it.buttons && it.buttons.length }}                        <div class="modal-footer">                            {{~ it.buttons :btn }}                                <button type="button"                                    class="btn btn-{{= btn.type }}{{? btn.cls }} {{= btn.cls }}{{?}}"                                    ml-bind="[events]:{{= btn.name }}">{{= btn.label }}</button>                            {{~}}                        </div>                    {{?}}                </div>            </div>'
}});s.add(z),b.exports=z,_.extend(z,{createDialog:d,openDialog:k,getOpenedDialog:p}),_.extendProto(z,{openDialog:n,closeDialog:o,destroy:q});var A,B,C},{}],23:[function(a,b,c){"use strict";function d(){function a(a){var c=a.target,d=a.relatedTarget,f=i._dropdown.listeners;e(c)&&f.remove(c.contentWindow.document,"click",b),e(d)&&f.add(d.contentWindow.document,"click",b)}function b(a){i.el.contains(a.target)||i.hideMenu()}var c=this.el.querySelector("."+n),d=this.el.querySelector("."+o);if(!c||!d)return l.error("MLDropdown:",n,"or",o,"isn't found");var f=window.document,g=this.toggleMenu.bind(this,void 0),h=new m;this._dropdown={menu:d,visible:!1,listeners:h},this.hideMenu();var i=this;h.add(c,"click",g),h.add(f,"mouseout",a),h.add(f,"click",b)}function e(a){return a&&"IFRAME"==a.tagName}function f(){this._dropdown.listeners.removeAll(),delete this._dropdown,j.prototype.destroy.apply(this,arguments)}function g(){this.toggleMenu(!0)}function h(){this.toggleMenu(!1)}function i(a){a="undefined"==typeof a?!this._dropdown.visible:!!a,this._dropdown.visible=a;var b=this._dropdown.menu;b.style.display=a?"block":"none"}var j=milo.Component,k=milo.registry.components,l=milo.util.logger,m=milo.util.domListeners,n="dropdown-toggle",o="dropdown-menu",p=j.createComponentClass("MLDropdown",{events:void 0,dom:{cls:["ml-bs-dropdown","dropdown"]}});k.add(p),b.exports=p,_.extendProto(p,{start:d,destroy:f,toggleMenu:i,showMenu:g,hideMenu:h})},{}],24:[function(a,b,c){"use strict";if(!window.milo||!window.milo.milo_version)throw new Error("milo is not available");a("./use_components")},{"./use_components":25}],25:[function(a,b,c){"use strict";a("./components/Group"),a("./components/Wrapper"),a("./components/Text"),a("./components/Select"),a("./components/Input"),a("./components/InputList"),a("./components/Textarea"),a("./components/RadioGroup"),a("./components/Button"),a("./components/Hyperlink"),a("./components/List"),a("./components/ListItem"),a("./components/Time"),a("./components/Date"),a("./components/Combo"),a("./components/SuperCombo"),a("./components/ComboList"),a("./components/Image"),a("./components/DropTarget"),a("./components/FoldTree"),a("./components/bootstrap/Alert"),a("./components/bootstrap/Dialog"),a("./components/bootstrap/Dropdown")},{"./components/Button":1,"./components/Combo":2,"./components/ComboList":3,"./components/Date":4,"./components/DropTarget":5,"./components/FoldTree":6,"./components/Group":7,"./components/Hyperlink":8,"./components/Image":9,"./components/Input":10,"./components/InputList":11,"./components/List":12,"./components/ListItem":13,"./components/RadioGroup":14,"./components/Select":15,"./components/SuperCombo":16,"./components/Text":17,"./components/Textarea":18,"./components/Time":19,"./components/Wrapper":20,"./components/bootstrap/Alert":21,"./components/bootstrap/Dialog":22,"./components/bootstrap/Dropdown":23}]},{},[24]);
//# sourceMappingURL=milo-ui.min.js.map